/**
 * Прототипы функций-заданий для тренировки работы с объектами
 *
 * ВАЖНО: Это только прототипы (сигнатуры функций)!
 * Реализацию нужно написать самостоятельно!
 */

// ============================================================
// УРОВЕНЬ 1: Базовые операции с объектами
// ============================================================

/**
 * ЗАДАНИЕ 1: Получить имя карты по ID
 *
 * @param card - объект карты
 * @returns имя карты или пустую строку
 *
 * Задача: получить значение поля name из объекта card
 */
function getCardName(card) {
  // TODO: Реализовать получение имени карты
  return "";
}

/**
 * ЗАДАНИЕ 2: Проверить, активна ли карта
 *
 * @param card - объект карты
 * @returns true если карта активна, false в противном случае
 *
 * Задача: проверить, что поле status равно "Активная"
 */
function isCardActive(card) {
  // TODO: Реализовать проверку статуса
  return false;
}

/**
 * ЗАДАНИЕ 3: Получить баланс карты
 *
 * @param card - объект карты
 * @returns строку с балансом или "0.00" если баланса нет
 *
 * Задача: безопасно получить поле balance, вернуть значение по умолчанию если его нет
 */
function getCardBalance(card) {
  // TODO: Реализовать получение баланса
  return "";
}

// ============================================================
// УРОВЕНЬ 2: Вложенные объекты
// ============================================================

/**
 * ЗАДАНИЕ 4: Получить тип карты
 *
 * @param card - объект карты с вложенным объектом type
 * @returns название типа карты
 *
 * Задача: получить поле name из вложенного объекта type
 */
function getCardTypeName(card) {
  // TODO: Реализовать получение названия типа
  return "";
}

/**
 * ЗАДАНИЕ 5: Проверить, разрешен ли дневной лимит
 *
 * @param card - объект карты с настройками лимитов
 * @returns true если дневной лимит разрешен
 *
 * Задача: проверить поле allowed_daily_limit во вложенном объекте type
 */
function isDailyLimitAllowed(card) {
  // TODO: Реализовать проверку разрешения лимита
  return false;
}

/**
 * ЗАДАНИЕ 6: Получить настройки автопополнения
 *
 * @param card - объект карты с настройками автопополнения
 * @returns объект с порогом и суммой пополнения, или null если настроек нет
 *
 * Задача: безопасно получить объект top_up, вернуть null если его нет
 */
function getAutoTopupSettings(card) {
  // TODO: Реализовать получение настроек автопополнения
  return null;
}

// ============================================================
// УРОВЕНЬ 3: Массивы объектов
// ============================================================

/**
 * ЗАДАНИЕ 7: Посчитать количество активных карт
 *
 * @param cards - массив карт
 * @returns количество карт со статусом "Активная"
 *
 * Задача: использовать filter или reduce для подсчета
 */
function countActiveCards(cards) {
  // TODO: Реализовать подсчет активных карт
  return -1;
}

/**
 * ЗАДАНИЕ 8: Получить все теги из массива карт
 *
 * @param cards - массив карт с тегами
 * @returns массив уникальных названий тегов (без дубликатов)
 *
 * Задача: собрать все теги из всех карт, удалить дубликаты
 */
function getAllUniqueTags(cards) {
  // TODO: Реализовать сбор уникальных тегов
  return [];
}

/**
 * ЗАДАНИЕ 9: Найти самую дорогую карту по балансу
 *
 * @param cards - массив карт
 * @returns объект карты с наибольшим балансом или null если массив пуст
 *
 * Задача: использовать reduce или sort для поиска максимума
 */
function findCardWithMaxBalance(cards) {
  // TODO: Реализовать поиск карты с максимальным балансом
  return null;
}

/**
 * ЗАДАНИЕ 10: Получить карты без лимитов
 *
 * @param cards - массив карт
 * @returns массив карт, у которых отсутствует поле limits
 *
 * Задача: отфильтровать карты без поля limits
 */
function getCardsWithoutLimits(cards) {
  // TODO: Реализовать фильтрацию карт без лимитов
  return [];
}

// ============================================================
// УРОВЕНЬ 4: Трансформация объектов
// ============================================================

/**
 * ЗАДАНИЕ 11: Создать упрощенную копию карты
 *
 * @param card - полный объект карты
 * @returns упрощенный объект только с основными полями
 *
 * Задача: создать новый объект только с полями id, name, balance, currency
 */
function createSimplifiedCard(card) {
  // TODO: Реализовать создание упрощенной копии
  return { id: "", name: "", balance: "", currency: "" };
}

/**
 * ЗАДАНИЕ 12: Переименовать карту (создать новый объект)
 *
 * @param card - объект карты
 * @param newName - новое имя
 * @returns новый объект карты с измененным именем (БЕЗ изменения оригинала!)
 *
 * Задача: создать копию объекта с измененным полем name
 */
function renameCard(card, newName) {
  // TODO: Реализовать переименование (создать новую копию!)
  return { id: "", name: "" };
}

/**
 * ЗАДАНИЕ 13: Добавить тег к карте
 *
 * @param card - объект карты с массивом тегов
 * @param newTag - новый тег для добавления
 * @returns новая копия карты с добавленным тегом
 *
 * Задача: создать копию карты и добавить новый тег в массив tags
 */
function addTagToCard(card, newTag) {
  // TODO: Реализовать добавление тега (не мутировать оригинал!)
  return { id: "", tags: [] };
}

/**
 * ЗАДАНИЕ 14: Обновить баланс карты
 *
 * @param card - полный объект карты
 * @param newBalance - новое значение баланса
 * @returns новая копия карты с обновленным балансом
 *
 * Задача: создать deep copy объекта карты и изменить только поле balance
 */
function updateCardBalance(card, newBalance) {
  // TODO: Реализовать обновление баланса (создать глубокую копию!)
  return { id: "", balance: "", ...card };
}

// ============================================================
// УРОВЕНЬ 5: Группировка и агрегация
// ============================================================

/**
 * ЗАДАНИЕ 15: Сгруппировать карты по статусу
 *
 * @param cards - массив карт
 * @returns объект, где ключи - статусы, значения - массивы карт с этим статусом
 *
 * Пример: { "Активная": [card1, card2], "Замороженная": [card3] }
 *
 * Задача: использовать reduce для группировки
 */
function groupCardsByStatus(cards) {
  // TODO: Реализовать группировку карт по статусу
  return {};
}

/**
 * ЗАДАНИЕ 16: Подсчитать общий баланс по всем картам
 *
 * @param cards - массив карт
 * @returns сумму всех балансов как число
 *
 * Задача: преобразовать строковые балансы в числа и сложить
 */
function calculateTotalBalance(cards) {
  // TODO: Реализовать подсчет общего баланса
  return 0;
}

/**
 * ЗАДАНИЕ 17: Создать карту-сводку
 *
 * @param cards - массив карт
 * @returns объект со статистикой по картам
 *
 * Задача: посчитать количество карт, активные карты, общий баланс
 */
function createCardsSummary(cards) {
  // TODO: Реализовать создание сводки
  return { total: 0, active: 0, total_balance: 0 };
}

// ============================================================
// УРОВЕНЬ 6: Глубокие вложенности
// ============================================================

/**
 * ЗАДАНИЕ 18: Получить настройки уведомлений пользователя
 *
 * @param user - объект пользователя с глубоко вложенными настройками
 * @returns объект с настройками уведомлений или null если его нет
 *
 * Задача: безопасно добраться до settings.notifications
 */
function getUserNotifications(user) {
  // TODO: Реализовать получение настроек уведомлений
  return null;
}

/**
 * ЗАДАНИЕ 19: Проверить двухфакторную аутентификацию
 *
 * @param user - объект пользователя
 * @returns true если двухфакторная аутентификация включена
 *
 * Задача: безопасно проверить settings.security.two_factor_enabled
 */
function isTwoFactorEnabled(user) {
  // TODO: Реализовать проверку 2FA
  return false;
}

// ============================================================
// УРОВЕНЬ 7: Преобразование структур данных
// ============================================================

/**
 * ЗАДАНИЕ 20: Преобразовать массив карт в объект-словарь
 *
 * @param cards - массив карт
 * @returns объект, где ключи - ID карт, значения - сами карты
 *
 * Пример: { "card-1": {...}, "card-2": {...} }
 *
 * Задача: использовать reduce или Object.fromEntries
 */
function convertCardsArrayToObject(cards) {
  // TODO: Реализовать преобразование в объект-словарь
  return {};
}

/**
 * ЗАДАНИЕ 21: Извлечь только нужные поля из карты
 *
 * @param card - полный объект карты
 * @returns объект только с полями id, name, masked_card_number, payment_system
 *
 * Задача: деструктуризация и создание нового объекта
 */
function extractCardDisplayFields(card) {
  // TODO: Реализовать извлечение нужных полей
  return {
    id: "",
    name: "",
    masked_card_number: "",
    payment_system: "",
  };
}

/**
 * ЗАДАНИЕ 22: Объединить настройки карты
 *
 * @param baseSettings - базовые настройки
 * @param overrideSettings - настройки для переопределения
 * @returns новый объект с объединенными настройками
 *
 * Задача: создать новый объект, объединив baseSettings и overrideSettings
 */
function mergeCardSettings(baseSettings, overrideSettings) {
  // TODO: Реализовать объединение настроек
  return {};
}

// ============================================================
// УРОВЕНЬ 8: Фильтрация по сложным условиям
// ============================================================

/**
 * ЗАДАНИЕ 23: Найти карты с лимитом выше порога
 *
 * @param cards - массив карт
 * @param limitType - тип лимита ("daily", "weekly", "monthly")
 * @param threshold - пороговое значение
 * @returns массив карт с лимитом выше порога
 *
 * Задача: отфильтровать карты по сложному условию
 */
function findCardsWithLimitAbove(cards, limitType, threshold) {
  // TODO: Реализовать поиск карт с лимитом выше порога
  return [];
}

/**
 * ЗАДАНИЕ 24: Получить избранные карты отсортированные по балансу
 *
 * @param cards - массив карт банковских продуктов (bin)
 * @returns массив ID избранных карт, отсортированных по балансу issue_cost
 *
 * Задача: фильтровать + сортировать по вложенному полю
 */
function getFavoriteCardsSorted(cards) {
  // TODO: Реализовать получение и сортировку избранных карт
  return [];
}

// ============================================================
// УРОВЕНЬ 9: Работа с массивами в объектах
// ============================================================

/**
 * ЗАДАНИЕ 25: Добавить элемент в массив внутри объекта
 *
 * @param account - объект счета с массивом карт
 * @param newCard - новая карта
 * @returns новая копия счета с добавленной картой
 *
 * Задача: создать копию объекта и добавить элемент в массив cards
 */
function addCardToAccount(account, newCard) {
  // TODO: Реализовать добавление карты в счет
  return { cards: [], total_balance: "" };
}

/**
 * ЗАДАНИЕ 26: Удалить тег из всех карт
 *
 * @param cards - массив карт
 * @param tagId - ID тега для удаления
 * @returns новый массив карт без указанного тега
 *
 * Задача: создать новые копии карт с удаленными тегами
 */
function removeTagFromAllCards(cards, tagId) {
  // TODO: Реализовать удаление тега из всех карт
  return [];
}

/**
 * ЗАДАНИЕ 27: Обновить поле карты в массиве
 *
 * @param cards - массив карт
 * @param cardId - ID карты для обновления
 * @param updates - поля для обновления
 * @returns новый массив с обновленной картой
 *
 * Задача: найти карту, создать ее копию с обновленными полями
 */
function updateCardInArray(cards, cardId, updates) {
  // TODO: Реализовать обновление карты в массиве
  return [];
}

export {
  getCardName,
  isCardActive,
  getCardBalance,
  getCardTypeName,
  isDailyLimitAllowed,
  getAutoTopupSettings,
  countActiveCards,
  getAllUniqueTags,
  findCardWithMaxBalance,
  getCardsWithoutLimits,
  createSimplifiedCard,
  renameCard,
  addTagToCard,
  updateCardBalance,
  groupCardsByStatus,
  calculateTotalBalance,
  createCardsSummary,
  getUserNotifications,
  isTwoFactorEnabled,
  convertCardsArrayToObject,
  extractCardDisplayFields,
  mergeCardSettings,
  findCardsWithLimitAbove,
  getFavoriteCardsSorted,
  addCardToAccount,
  removeTagFromAllCards,
  updateCardInArray,
};
